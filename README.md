# WIP -  Cert Manager DYNU ACME webhook

Webhook to get a certificate for dynu dns provider

### Create the secret
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: dynu-credentials
stringData:
  apikey: <your api key>
```

<your api key> can be found at: control panel -> [API Credentials](https://www.dynu.com/en-US/ControlPanel/APICredentials)

### Create an issuer
```yaml
apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  name: <your issuer name> 
spec:
  acme:
    email: <your email address> 
    server: https://acme-staging-v02.api.letsencrypt.org/directory
    privateKeySecretRef:
      name: <name for privateKeySecretRef> # autogenerated
    solvers:
      - dns01:
          webhook:
            groupName: gunstore.github.com
            solverName: dynu
            config:
              ttl: 300
              apikeySecretKeyRef:
                name: dynu-credentials
                key: apikey

```

### Create a certificate
```yaml
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: asgard-cert
spec:
  commonName: example.com
  dnsNames:
  - example.com
  issuerRef:
    name: <your issuer name> 
    kind: Issuer
    group: cert-manager.io
  secretName: <what the secret should be named>
```


### Create a wildcard certificate
```yaml
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: asgard-cert
spec:
  commonName: "*.example.com"
  dnsNames:
  - example.com
  - "*.example.com"
  issuerRef:
    name: <your issuer name> 
    kind: Issuer
    group: cert-manager.io
  secretName: <what the secret should be named>
```


### Running the test suite

All DNS providers **must** run the DNS01 provider conformance testing suite,
else they will have undetermined behaviour when used with cert-manager.

**It is essential that you configure and run the test suite when creating a
DNS01 webhook.**

You can run the test suite with:

```bash
$ TEST_ZONE_NAME=example.com go test .
```
